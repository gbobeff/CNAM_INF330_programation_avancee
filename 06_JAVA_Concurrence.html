<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>JAVA - Concurrence</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/league.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>

    <div class="reveal">

        <div class="slides">
            <section>
                <h3>Langage JAVA</h3>
                <h4>Concurrence</h4>

                <p>
                    <small>Module INF330 - Programmation avancée </small>
                </p>
                <p>
                    <small>Gustavo BOBEFF</small>
                </p>
                <p>
                    <small>2021 - 2022</small>
                </p>
                <img src="img/logo_cnam_na.png">
            </section>
            <section>
                <h4>Définition</h4>
                <div>
                    <ul style="font-size: 30px;text-align: left;">
                        <li>Définition Wikipedia : </li>
                        <ul>
                            <li>La programmation concurrente est un style de programmation tenant compte, dans un programme, de l'existence de plusieurs piles
                                sémantiques. Ces piles peuvent être appelées <b style="color: rgb(186, 218, 8);">threads</b>, <b style="color: rgb(186, 218, 8);">processus</b> ou <b
                                    style="color: rgb(186, 218, 8);">tâches</b>.</li>
                            <li>Elles sont matérialisées en machine par une pile d'exécution et un ensemble de données
                                privées.</li>
                            <li> Les threads disposent d'une zone de mémoire partagée alors que les processus sont strictement isolés.</li>
                        </ul>
                    </ul>
                </div>
            </section>
            <section>
                <h4>L’exécution concurrente, omniprésente ...</h4>
                <div>
                    <ul style="font-size: 30px;text-align: left;">
                        <li>tous les jours, on utilise le téléphone mobile sans se poser de questions</li>
                        <ul style="font-size: 20px;text-align: left;">
                            <li>on peut téléphoner et recevoir des sms en parallèle</li>
                            <li>l'alarme réveil peut se déclencher pendant qu'on est en
                                train d’écouter de la musique ou regarder une vidéo</li>
                            <li>les applications agissent de manière collaborative</li>
                            <li>cette collaboration repose sur des concepts et outils dédiés
                                fournis par le système d’exploitation</li>
                        </ul>
                        <li>tous les jours, on utilise un browser pour consulter des informations sur le web</li>
                        <ul style="font-size: 20px;text-align: left;">
                            <li>on est potentiellement des dizaines / centaines / milliers à accéder à certains sites simultanément mais on n'a pas le sentiment d'attendre</li>
                            <li>les serveurs Web sont capables de traiter un grand nombres de
                                requêtes en parallèle</li>
                            <li>cette parallélisation repose aussi sur des concepts et outils dédiés fournis par le système d’exploitation</li>
                        </ul>
                    </ul>
                </div>
            </section>
            <section>
                <h4>Domaines d'application</h4>
                <div>
                    <ul style="font-size: 30px;text-align: left;">
                        <li>Entrées/sorties non-bloquantes</li>
                        <li>Alarmes, Réveil, Déclenchementpériodique</li>
                        <li>Algorithmes parallèles</li>
                        <li>Modélisation d’activités parallèles</li>
                        <li>Méthodologies</li>
                    </ul>
                </div>
            </section>
            <section>
                <h4>les processus</h4>
                <div>
                    <ul style="font-size: 30px;text-align: left;">
                        <li>Un système <b style="color: rgb(186, 218, 8);">multi-tâches</b> est capable d'exécuter plusieurs programmes en parallèle sur une même machine.</li>
                        <ul style="font-size: 25px;text-align: left;">
                            <li>La plupart du temps, une machine n'a qu'un seul processeur qui ne peut exécuter qu'un seul programme à la fois.</li>
                        </ul>
                        <li>Un programme en cours d'éxécution est appelé un <b style="color: rgb(186, 218, 8);">processus</b>.</li>
                        <li>La plupart des systèmes d'exploitation sont équipés d'un <b style="color: rgb(186, 218, 8);">ordonnançeur</b> de tâches qui donne à tour de rôle le processeur aux
                            processus.</li>
                        <li>Chaque processus est activé de façon cyclique et pendant une courte durée</li>
                        <ul style="font-size: 25px;text-align: left;">
                            <li>L'utilisateur a l'impression que plusieurs processus sont en cours d'exécution</li>
                        </ul>
                    </ul>
                </div>
            </section>
            <section>
                <h4>les classes de processus</h4>
                <div>
                    <ul style="font-size: 30px;text-align: left;">
                        <li>Processus = <b style="color: rgb(186, 218, 8);">ensemble d'instructions</b> + <b style="color: rgb(186, 218, 8);">état d'exécution</b> (pile, registres, pc, tas,
                            descripteurs d'E/S, gestionnaires de signaux ...)</li>
                        <li>Deux classes principales de processus</li>
                        <ul style="font-size: 25px;text-align: left;">
                            <li><b style="color: rgb(186, 218, 8);">Processus lourd</b> (ou tâche) : ne partage pas son état (sauf des espaces mémoire partagés déclarés explicitement)</li>
                            <li><b style="color: rgb(186, 218, 8);">Processus léger</b> (ou thread) : partage son tas, ses descripteurs, ...</li>
                        </ul>
                    </ul>
                </div>
            </section>
            <section>
                <h4>Les Threads</h4>
                <div>
                    <ul style="font-size: 30px;">
                        <li>Les ressources allouées à un processus (temps processeur, mémoire) vont être partagées entre les threads qui le composent.</li>
                        <li>Les threads d'un même processus partagent le même espace d'adressage,les mêmes variables d'environnement, les mêmes données, ... contrairement aux processus.</li>
                        <li>Un processus possède au moins un thread (qui exécute le programme principal <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">main()</b>).
                        </li>
                        <li>Les programmes qui utilisent plusieurs threads sont dits <b style="color: rgb(186, 218, 8);">multithreadés</b>.</li>
                        <li>Les threads font partie intégrante du langage JAVA. Elles sont gérées grâce à la classe <b
                                style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Thread</b>.</li>
                    </ul>
                </div>
            </section>
            <section>
                <!-- Threads -->
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>créer une classe qui hérite de la class Thread</li>
                            <li>redéfnir la méthode <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">run()</b> pour y inclure les traitements à exécuter par le thread
                            </li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                    <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                        public class SimpleThread extends Thread {
                                            @Override
                                            public void run() {
                                                System.out.println("Je suis un SimpleThread et mon nom est '" + 
                                                        Thread.currentThread().getName()+"'");
                                            }

                                        }
                                </script></code></pre>
                            </span>
                            <li>pour créer et exécuter le thread, il faut instancier un objet et appeler sa méthode <b
                                    style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">start()</b> qui va créer le thread et elle-même appeler la métho de <b
                                    style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">run()</b></li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                    <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                        public static void main(String[] args) {
                                            new SimpleThread().start();
                                            System.out.println("Je suis l'Application et mon thread est '" + 
                                                    Thread.currentThread().getName()+"'");
                                        }
                                </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                            <code data-trim data-line-numbers><script type="text/template">
                                Je suis l'Application et mon thread est 'main'
                                Je suis un SimpleThread et mon nom est 'Thread-0'
                            </script></code></pre>
                            </span>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Difference entre <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">run()</b> et <b
                                    style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">start()</b> : la méthode <b
                                    style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">run()</b> contient le code à exécuter par le thread : elle peut
                                être appelée mais aucun nouveau thread n'est lancé.</b></li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                    <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                        public static void main(String[] args) {
                                            new SimpleThread().run();
                                            System.out.println("Je suis l'Application et mon thread est '" + 
                                                    Thread.currentThread().getName()+"'");
                                        }
                                </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                            <code data-trim data-line-numbers><script type="text/template">
                                Je suis un SimpleThread et mon nom est 'main'
                                Je suis l'Application et mon thread est 'main'
                            </script></code></pre>
                            </span>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 20px;">
                            <li><b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Thread.sleep</b> : utilisée pour arrêter l’exécution du thread en cours pendant une
                                durée spécifique</li>
                            <li>Une fois cette durée écoulée, le thread qui s’exécute le plus tôt recommence à s’exécuter.</li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                    <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                        public class SimpleThreadWithSleep {
                                            public static void main(String[] args) throws InterruptedException {
                                                Thread unThreadAvecSommeil = new Thread("Processus-léger-marmotte") {
                                                    @Override
                                                    public void run() {
                                                        try {
                                                            System.out.println("moi, le thread'" + 
                                                                Thread.currentThread().getName() + "', je suis fatigué.");
                                                            Thread.sleep(1000 * 5);
                                                            System.out.println("moi, le thread'" + 
                                                                Thread.currentThread().getName()+"', j'ai fini mon travail après une petite sieste'.");
                                                        } catch (InterruptedException e) {
                                                            System.out.println("moi, le thread '" + 
                                                                Thread.currentThread().getName()+"', je suis interrompu ? mais wtf!!!" );
                                                        }
                                                    }
                                                };
                                        
                                                System.out.println("Lancement de l'application");
                                                unThreadAvecSommeil.start();
                                                System.out.println("Je suis l'Application et mon thread est '" 
                                                    + Thread.currentThread().getName()+"'");
                                            }
                                        }
                                </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                            <code data-trim data-line-numbers><script type="text/template">
                                Lancement de l'application
                                Je suis l'Application et mon thread est 'main'
                                moi, le thread 'Processus-léger-marmotte', je suis fatigué.
                                moi, le thread 'Processus-léger-marmotte', j'ai fini mon travail après une petite sieste'.
                            </script></code></pre>
                            </span>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 20px;">
                            <li>On peut interrompre le thread avec la méthode <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">interrupt()</b> s'il est toujours en
                                cours d'exécution.</li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                    <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                        public class SimpleThreadWithSleep {
                                            public static void main(String[] args) throws InterruptedException {
                                                Thread unThreadAvecSommeil = new Thread("Processus-léger-marmotte") {
                                                    @Override
                                                    public void run() {
                                                        try {
                                                            System.out.println("moi, le thread'" + 
                                                                Thread.currentThread().getName() + "', je suis fatigué.");
                                                            Thread.sleep(1000 * 5);
                                                            System.out.println("moi, le thread'" + 
                                                                Thread.currentThread().getName()+"', j'ai fini mon travail après une petite sieste'.");
                                                        } catch (InterruptedException e) {
                                                            System.out.println("moi, le thread '" + 
                                                                Thread.currentThread().getName()+"', je suis interrompu ? mais wtf!!!" );
                                                        }
                                                    }
                                                };
                                        
                                                System.out.println("Lancement de l'application");
                                                unThreadAvecSommeil.start();
                                                Thread.sleep(1000 * 2);
                                                unThreadAvecSommeil.interrupt();
                                                System.out.println("Je suis l'Application et mon thread est '" + 
                                                    Thread.currentThread().getName()+"'");
                                            }
                                        }
                                </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                            <code data-trim data-line-numbers><script type="text/template">
                                Lancement de l'application
                                moi, le thread 'Processus-léger-marmotte', je suis fatigué.
                                moi, le thread 'Processus-léger-marmotte', je suis interrompu ? mais wtf!!!
                                Je suis l'Application et mon thread est 'main'
                            </script></code></pre>
                            </span>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 20px;">
                            <li>Cycle de vie</li>
                            <img src="img/threads_cyle_vie.png" width="80%" height="80%">
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Méthode simple : utilisation de la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Thread</b></h4>
                    <div>
                        <ul style="font-size: 30px;">
                            <li>Limitations</li>
                            <ul>
                                <li>lein fort entre le traitement (<b style="color: rgb(186, 218, 8);font-style: italic;">quoi</b>) et la méthode d'exécution (<b
                                        style="color: rgb(186, 218, 8);font-style: italic;">comment</b>)</li>
                                <li>impossible d'exécuter le même traitement dans threads différents sans répéter le code</li>
                            </ul>
                            <li>Solution ? On utilise l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Runnable</b> ... </li>
                        </ul>
                    </div>
                </section>
            </section>
            <section>
                <!-- Runnables -->
                <section>
                    <h4>Méthode pratique : l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Runnable</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>L'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Runnable</b> permet de créer un objet, que l'on utilisera ensuite comme
                                constructeur d'un Thread.</li>
                            <li>C'est la méthode <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">start()</b> de l'objet qui sera responsable de la création et de
                                l'activation du thread.</li>
                        </ul>
                        <span style="font-size: 20px;">
                            <pre data-id="code-animation">
                                <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                    public class SimpleRunnable implements Runnable {
                                        @Override
                                        public void run() {
                                            try {
                                                Thread.sleep(1000 * (int) ((Math.random() * (5 - 1)) + 1));
                                            } catch (InterruptedException e) {
                                                e.printStackTrace();
                                            }
                                            System.out.println("Je suis un Runnable dont le nom de mon Thread est '" +
                                                    Thread.currentThread().getName()+"'");
                                        }
                                    
                                        public static void main(String[] args) {
                                            System.out.println("Je suis l'Application et mon thread est '" + 
                                                Thread.currentThread().getName()+"'");
                                            new Thread(new SimpleRunnable(),"ASimpleRunnable1").start();
                                            new Thread(new SimpleRunnable(),"ASimpleRunnable2").start();
                                            new Thread(new SimpleRunnable(),"ASimpleRunnable3").start();
                                        }
                                    }
                            </script></code></pre>
                        </span>
                        résultat
                        <span style="font-size: 20px;">
                            <pre data-id="code-animation">
                        <code data-trim data-line-numbers><script type="text/template">
                            Je suis l'Application et mon thread est 'main'
                            Je suis un Runnable dont le nom de mon Thread est 'ASimpleRunnable2'
                            Je suis un Runnable dont le nom de mon Thread est 'ASimpleRunnable1'
                            Je suis un Runnable dont le nom de mon Thread est 'ASimpleRunnable3'
                        </script></code></pre>
                        </span>
                    </div>
                </section>
                <section>
                    <h4>Méthode pratique : l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.Runnable</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Avec l'introduction des <b style="color: rgb(186, 218, 8);">interfaces fonctionnelles</b> (comportant exactement une et une seule méthode publique), on peut écrire un
                                objet runnnable comme il suit : </li>
                        </ul>
                        <span style="font-size: 25px;">
                            <pre data-id="code-animation">
                                <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                    public interface Runnable {
                                        public void run();
                                    }
                            </script></code></pre>
                        </span>
                        <span style="font-size: 25px;">
                            <pre data-id="code-animation">
                        <code data-trim data-line-numbers><script type="text/template">
                            public class RunnableAsFunctionalInterface {
                                public static void main(String[] args) {
                                    Runnable runnable = () -> {
                                        try {
                                            Thread.sleep(1000 * (int) ((Math.random() * (5 - 1)) + 1));
                                            System.out.println("Je suis un Runnable dont le nom de mon Thread est '" +
                                                    Thread.currentThread().getName() + "'");
                                        } catch (InterruptedException e) {
                                            System.out.println("moi, le thread '" + Thread.currentThread().getName() +
                                                    "', je suis interrompu ? mais wtf!!!");
                                        }
                                    };
                                    new Thread(runnable, "Processus-léger").start();
                                }
                            }
                        </script></code></pre>
                        </span>
                    </div>
                </section>
                <section>
                    <h4>Limitations des méthodes simples</h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>On doit créer un thread manuellement à chaque fois qu'un traitement asynchrone doit être exécuté.</li>
                            <li>Augmente la complexité des applications (risque de contention).</li>
                            <li>Consomation de mémoire peu optimisée.</li>
                            <li>Adaptées pour de petites applications.</li>
                        </ul>
                        <ul style="font-size: 25px;">
                            <li>Solution ? utilisation du framework Executor</li>
                            <ul>
                                <li>disponible dans le package <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">java.lang.concurrent</b> depuis Java 5</li>
                            </ul>
                        </ul>
                    </div>
                </section>
            </section>
            <section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 20px;">
                            <li>Eléments fondamentaux du frameworks sont : </li>
                            <ul>
                                <li>l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Callable</b> (similaire à l'interface <b
                                        style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Runnable</b> mais elle permet
                                    aussi de retourner une valeur)</li>
                                <span style="font-size: 25px;">
                                    <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public interface Callable<T> {
                                                public T call();
                                            }
                                    </script></code></pre>
                                </span>
                                <li>l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Executor</b></li>
                                <span style="font-size: 25px;">
                                    <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public interface Executor {
                                                void execute(Runnable command);
                                             }
                                    </script></code></pre>
                                </span>
                                <li>l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">ExecutorService</b></li>
                                <span style="font-size: 25px;">
                                    <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public interface ExecutorService extends Executor {
                                                // Exécution des tâches
                                                public void submit(Runnable job);
                                                public Future<V> submit(Callable<V> job);
                                              
                                                // Cyle de vie
                                                public void shutdown();
                                                public List&lt;Runnable&gt; shutdownNow();
                                                public boolean isShutdown();
                                                ...
                                             }
                                    </script></code></pre>
                                </span>
                                <li>l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Runnable</b></li>
                                <li>et surtout la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Future</b></li>
                            </ul>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 30px;">
                            <li>la classe <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Future&lt;T&gt;</b></li>
                            <ul style="font-size: 25px;">
                                <li>le traitement associé à un objet <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Runnable</b> ou <b
                                        style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Callable</b> est exécuté dans un thread</li>
                                <li>en générale le résultat du traitement n'est pas disponible avant un certain temps</li>
                                <li>dans ce cas on peut attendre le résultat et le récupérer dans un objet <b
                                        style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Future&lt;T&gt;</b></li>
                            </ul>
                        </ul>
                    </div>
                    <span style="font-size: 25px;">
                        <pre data-id="code-animation">
                            <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                public interface Future<V> {
                                    // retourne la valeur du traitement quand elle est disponible
                                    public V get(); 
                                    // retourne la valeur du traitement mais elle attends 'timeout' unités de temps
                                    public V get(long timeout, TimeUnit unit); 
                                    // retourne true si le traitement est terminé
                                    public boolean isDone(); 
                                    // permet d'arrêter le traitement 
                                    // (même s'il est cours d'exécution => mayInterruptIfRunning = true)
                                    public boolean cancel(boolean mayInterruptIfRunning); 
                                    // retourne true si le traitement a été arrêté
                                    public boolean isCancelled();
                                 }
                        </script></code></pre>
                    </span>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Liste (partielle) des méthodes de l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">ExecutorService</b> : </li>
                            <table class="tableau" width="100%" border="1" align="center" cellpadding="4" cellspacing="0" style="font-size: 15px;">
                                <tbody>
                                    <tr>
                                        <td>
                                            <p>Méthode</p>
                                        </td>
                                        <td>
                                            <p>Fonctionnalité</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            void execute(Runnable command)
                                        </td>
                                        <td>
                                            exécute le traitement mais elle ne retourne aucun résultat
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Future&lt;?&gt; submit(Runnable command)<br>
                                            Future&lt;V&gt; submit(Callable&lt;V&gt; task)
                                        </td>
                                        <td>
                                            exécute le traitement en retournant le résultat du traitement dans un objet Future&lt;V&gt; et le résultat est de type V
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            void shutdown()
                                        </td>
                                        <td>
                                            demande au ExecutorService de ne plus accepter de tâches et il arrête le ExecutorService une fois tous les threads en cours terminés
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            List&lt;Runnable&gt; shutdownNow()
                                        </td>
                                        <td>
                                            arrête les tâches en cours et retourne la liste de tâches qui n'ont pas être exécutées
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            boolea isShutdown
                                        </td>
                                        <td>
                                            retourne true si l'ExecutorService est arrêté (tous les threads terminés)
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            boolean awaitTermination(long timeout, TimeUnit unit)
                                        </td>
                                        <td>
                                            permet d'attendre l'arrêt de l'ExecutorService pendant une période de temps spécifique
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            T invokeAny(Collection&lt;Callable&lt;T&gt;&gt; tasks)
                                        </td>
                                        <td>
                                            exécute une collection de threads Callable, retourne un objet instance du type paramétré T, correspondant au résultat du premier thread
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            List&lt;Future&lt;T&gt;&gt; invokeAll(Collection&lt;Callable&lt;T&gt;&gt; tasks)
                                        </td>
                                        <td>
                                            retourne une liste de résultats Future&lt;T&gt; dont l'ordre respecte le même positionnement des threads dans la collection d'entrées et l'ensemble des
                                            résultats est obtenu et utilisable que lorsque tous les threads en entrée ont terminé leur exécution
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 20px;">
                            <li><b style="color: rgb(186, 218, 8);">Pool de threads</b></li>
                            <ul>
                                <li>Permet de contenir un ensemble de threads qui pourront être utilisés pour exécuter des tâches.</li>
                                <li>Ils sont particulièrement utiles pour exécuter des tâches similaires et indépendantes.</li>
                                <li>Chaque thread consomme de la ressource (CPU et mémoire)</li>
                                <ul>
                                    <li>le nombre de threads exécutables dépend </li>
                                    <ul>
                                        <li>des ressources de la machine </li>
                                        <li>du système d'exploitation</li>
                                    </ul>
                                </ul>
                                <li>Nombre de threads disponibles sur la machine</li>
                                <span style="font-size: 25px;">
                                    <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public class NombreThreadsDisponibles {
                                                public static void main(String[] args) {
                                                    System.out.println("Nombre de threads disponibles : " + 
                                                        Runtime.getRuntime().availableProcessors());
                                                }
                                            }
                                    </script></code></pre>
                                </span>
                                résultat
                                <span style="font-size: 20px;">
                                    <pre data-id="code-animation">
                            <code data-trim data-line-numbers><script type="text/template">
                                Nombre de threads disponibles : 8
                            </script></code></pre>
                                </span>
                            </ul>
                        </ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Pour simplifier l'utilisation de l'interface <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">ExecutorService</b>, Java fournit
                                l'implémentation <b style="color: rgb(186, 218, 8);font-family: 'Courier New', Courier, monospace;">Executors</b></li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public class Executors {
                                                public ExecutorService newSingleThreadExecutor()             {...};
                                                public ExecutorService newFixedThreadPool(int nbThreads)     {...};
                                                public ExecutorService newCachedThreadPool()                 {...};
                                                public ExecutorService newSingleThreadScheduledExecutor()    {...};
                                                public ExecutorService newScheduledThreadPool(int nbThreads) {...};
                                                // (...)
                                             }
                                    </script></code></pre>
                            </span>
                            <ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Exemple de pool simple (un seul thread)</li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public class SimpleExecutor {
                                                public static void main(String[] args) {
                                                    Runnable runnableTask = () -> {
                                                        try {
                                                            TimeUnit.MILLISECONDS.sleep(300);
                                                            System.out.println("Thread : " + Thread.currentThread().getName());
                                                        } catch (InterruptedException e) {
                                                            e.printStackTrace();
                                                        }
                                                    };
                                                    ExecutorService executorService = Executors.newSingleThreadExecutor();
                                                    executorService.execute(runnableTask);
                                                }
                                            }
                                    </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 20px;">
                                <pre data-id="code-animation">
                        <code data-trim data-line-numbers><script type="text/template">
                            Thread : pool-1-thread-1
                        </script></code></pre>
                            </span>
                            <ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Exemple : pool de 4 threads</li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public class NombreFixeThreads {
                                                public static void main(String... args) {
                                            
                                                    Runnable tache = () -> {
                                                        try {
                                                            TimeUnit.MILLISECONDS.sleep(300);
                                                            System.out.println("Thread : " + 
                                                                Thread.currentThread().getName());
                                                        } catch (InterruptedException e) {
                                                            e.printStackTrace();
                                                        }
                                                    };
                                                    // Pool avec 4 threads
                                                    ExecutorService pool = Executors.newFixedThreadPool(4);
                                                    // Exécuter 6 fois la même tâche
                                                    IntStream.range(0, 6).forEach(i -> {
                                                        pool.submit(tache);
                                                    });
                                                    pool.shutdown();
                                                    System.out.println("Je suis dans le thread : " + 
                                                        Thread.currentThread().getName());
                                                }
                                            }
                                    </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 20px;">
                                <pre data-id="code-animation">
                        <code data-trim data-line-numbers><script type="text/template">
                            Je suis dans le thread : main
                            Thread : pool-1-thread-2
                            Thread : pool-1-thread-1
                            Thread : pool-1-thread-3
                            Thread : pool-1-thread-4
                            Thread : pool-1-thread-2
                            Thread : pool-1-thread-1
                        </script></code></pre>
                            </span>
                            <ul>
                    </div>
                </section>
                <section>
                    <h4>Utilisation du framework <b style="color: rgb(186, 218, 8);">Executor</b></h4>
                    <div>
                        <ul style="font-size: 25px;">
                            <li>Exemple : utilisation de Callable pour retourner une valeur</li>
                            <span style="font-size: 25px;">
                                <pre data-id="code-animation">
                                        <code class="hljs" data-trim data-line-numbers><script type="text/template">
                                            public class CallableRetourneString {

                                                public static void main(String[] args) {
                                                    ExecutorService executorService = Executors.newSingleThreadExecutor();
                                                    Callable<String> cble1 = new Callable<String>() {
                                                        @Override
                                                        public String call() throws Exception {
                                                            return "Je suis le callable cble1";
                                                        }
                                                    };
                                                    Future<String> tache = executorService.submit(cble1);
                                                    try {
                                                        String res = tache.get();
                                                        System.out.println("Résult de la tache 'cble1' : " + res);
                                                    } catch (Exception e) {
                                                        e.printStackTrace();
                                                    }
                                                    executorService.shutdown();
                                                }
                                            }
                                    </script></code></pre>
                            </span>
                            résultat
                            <span style="font-size: 20px;">
                                <pre data-id="code-animation">
                        <code data-trim data-line-numbers><script type="text/template">
                            Résult de la tache 'cble1' : Je suis le callable cble1
                        </script></code></pre>
                            </span>
                            <ul>
                    </div>
                </section>
            </section>
        </div>
    </div>
    <script src="dist/reveal.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/search/search.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>

        // Also available as an ES module, see:
        // https://revealjs.com/initialization/
        Reveal.initialize({
            controls: true,
            progress: true,
            center: true,
            hash: true,
            pdfMaxPagesPerSlide: 1,
            pdfSeparateFragments: true,
            pdfPageHeightOffset: -1,

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight]
        });

    </script>

</body>

</html>